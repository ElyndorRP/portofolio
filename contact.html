<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact ‚Äî ùì°7ùì©</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ --bg:#0d0d0d; --glass:rgba(255,255,255,0.03); --neon-start:#7c5cff; --neon-mid:#31d2f2; --neon-end:#ff66b3; }
    html,body{height:100%; margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; background:var(--bg); color:#e6eef8;}
    header{backdrop-filter: blur(6px); background:var(--glass); border:1px solid rgba(255,255,255,0.04);}
    .neon{ background: linear-gradient(90deg,var(--neon-start),var(--neon-mid),var(--neon-end)); -webkit-background-clip:text; background-clip:text; color:transparent; }
    .glass{ background:var(--glass); backdrop-filter: blur(6px); border-radius:12px; border:1px solid rgba(255,255,255,0.04); }
    .menu-btn{ cursor:pointer; font-size:1.4rem; padding:6px 10px; }
    #mobileMenu{ position:fixed; right:18px; top:64px; z-index:60; display:none; min-width:180px; padding:12px; }
    #mobileMenu a{ display:block; padding:8px 10px; border-radius:8px; color:inherit; }
    #mobileMenu a:hover{ background: rgba(255,255,255,0.02); }
    main{ padding:5.5rem 1rem 3rem; max-width:720px; margin:0 auto; }
    input, textarea{ width:100%; background:rgba(0,0,0,0.35); color:inherit; border:1px solid rgba(255,255,255,0.02); padding:10px; border-radius:8px; }
    button{ cursor:pointer; }
  </style>
</head>
<body>
  <header class="fixed top-0 left-0 w-full z-50 glass flex items-center justify-between px-6 py-3">
    <div class="text-2xl neon font-bold">ùì°7ùì©</div>
    <div>
      <button id="hambtn2" class="menu-btn" aria-label="Menu">‚ò∞</button>
    </div>
    <div id="mobileMenu" class="glass p-3" role="menu" aria-hidden="true">
      <a href="accueil.html" onclick="closeMenu()">Accueil</a>
      <a href="projet.html" onclick="closeMenu()">Projets</a>
      <a href="game.html" onclick="closeMenu()">Playground</a>
      <a href="contact.html" onclick="closeMenu()">Contact</a>
    </div>
  </header>

  <main>
    <h1 class="text-4xl neon font-bold text-center mb-6">Contact</h1>

    <form id="contactForm" class="glass p-6 mx-4 max-w-md mx-auto" onsubmit="handleContact(event)">
      <label class="block mb-2"><input id="name" placeholder="Nom" required /></label>
      <label class="block mb-2"><input id="email" placeholder="Email ou Discord" required /></label>
      <label class="block mb-4"><textarea id="message" rows="6" placeholder="Message" required></textarea></label>
      <div class="flex gap-3">
        <button type="submit" class="bg-gradient-to-r from-[#7c5cff] to-[#ff66b3] px-4 py-2 rounded text-white font-bold">Envoyer</button>
        <button type="button" onclick="resetForm()" class="glass px-4 py-2 rounded">Reset</button>
      </div>
    </form>
  </main>

  <script>
    /* menu */
    const mobileMenu2 = document.getElementById('mobileMenu');
    const hambtn2 = document.getElementById('hambtn2');
    function toggleMenu2(){ const show = mobileMenu2.style.display === 'block'; mobileMenu2.style.display = show ? 'none' : 'block'; mobileMenu2.setAttribute('aria-hidden', show); }
    function closeMenu(){ mobileMenu2.style.display = 'none'; mobileMenu2.setAttribute('aria-hidden','true'); }
    hambtn2.addEventListener('click', toggleMenu2);
    document.addEventListener('click', (e)=>{ if(!mobileMenu2.contains(e.target) && e.target !== hambtn2) closeMenu(); });

    /* form -> discord webhook */
    async function handleContact(e){
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const message = document.getElementById('message').value.trim();
      if(!name || !email || !message) return alert('Remplis tous les champs.');

      const payload = {
        content: `üì® Nouveau message depuis le portfolio !\n**Nom:** ${escapeMarkdown(name)}\n**Email/Discord:** ${escapeMarkdown(email)}\n**Message:** ${escapeMarkdown(message)}`
      };

      try{
        const res = await fetch('https://discord.com/api/webhooks/1422619725686374470/m6A7VGzQYrOo_whvcRB6lQcjuBr-YJAvTvBOiRunaMcX8rAm2Y-rAsLGxvnCEf4brRlP', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        if(!res.ok) throw new Error('Webhook error');
        alert('Message envoy√© avec succ√®s ! Merci ' + name);
        resetForm();
      }catch(err){
        console.error(err);
        alert('Erreur lors de l\'envoi ‚Äî v√©rifie ta connexion ou le webhook.');
      }
    }

    function resetForm(){
      document.getElementById('name').value='';
      document.getElementById('email').value='';
      document.getElementById('message').value='';
    }

    function escapeMarkdown(s){
      return s.replace(/([\\`*_{}[\]()#+\-.!])/g,'\\$1');
    }
  </script>
</body>
</html>